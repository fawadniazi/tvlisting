(function(e){e.fn.mySlider=function(t){var n=t,r={},i=e(this[0]),s,o,u,a=!1,f=function(){(!n.width||!n.height||!n.itemWidth)&&e.error("mySlider requires width, height and itemWidth to be provided")},l=function(){s="mySlider_"+e("div.mySlider_main").length,i.addClass("mySlider_container"),i.find("ul").wrap('<div class="mySlider_main" id="'+s+'"/>');if(n.arrows){var t='<div class="mySlider_arrow"><img/></div>';i.prepend(t),i.find(".mySlider_arrow:first-child img").attr("src",n.imgPath+"/arrow_left.png"),i.append(t),i.find(".mySlider_arrow:last-child img").attr("src",n.imgPath+"/arrow_right.png")}if(n.navbar){var r='<div class="mySlider_navbar"><ul></ul></div>';i.append(r)}},c=function(){i.css({width:n.width,height:n.height}),o=i.find("#"+s+" ul"),r.listLength=o.find("li").length,r.autoUpdateInterval=n.autoUpdateInterval||1e3,n.arrows&&(r.arrowsWidth=n.arrowsWidth||"8%",r.mainWidth=n.mainWidth||"80%",r.mainMargin=n.mainMargin||"0 2%",i.find(".mySlider_main").css({width:r.mainWidth,margin:r.mainMargin})),n.navbar&&(r.navbarWidth=n.navbarWidth||"80%",r.navbarMargin=(100-parseFloat(r.navbarWidth))/2,r.mainHeight=n.mainHeight||"80%",i.find(".mySlider_main").css("height",r.mainHeight)),setTimeout(function(){r.mainHeightPx=parseFloat(o.parent().css("height")),r.mainWidthPx=parseFloat(o.parent().css("width")),r.navbarHeight=parseFloat(n.height)-r.mainHeightPx,n.itemWidth.indexOf("px")==-1?r.itemWidth=parseFloat(n.itemWidth)*r.mainWidthPx/100:r.itemWidth=parseFloat(n.itemWidth),r.margin=parseFloat(o.find("li:last-child").css("margin-left")),r.listWidth=(r.itemWidth+r.margin)*(r.listLength-1)+r.itemWidth,r.viewCount=Math.ceil(r.listWidth/r.mainWidthPx),r.viewIdx=0,i.find(".mySlider_main").css({"line-height":r.mainHeightPx+"px"}),o.css({width:r.listWidth}),o.find("li").css({width:r.itemWidth}),n.arrows&&i.find(".mySlider_arrow").css({width:r.arrowsWidth,"line-height":r.mainHeightPx+"px"}),n.navbar&&(i.find(".mySlider_navbar").css({width:r.navbarWidth,margin:"0 "+r.navbarMargin+"%"}),n.arrows&&i.find(".mySlider_arrow").css("height",r.mainHeight),i.find(".mySlider_navbar ul").css({"line-height":r.navbarHeight+"px"}),p(o))},50)},h=function(){o.find("li").length!=r.listLength&&(r.listLength=o.find("li").length,r.listWidth=(r.itemWidth+r.margin)*(r.listLength-1)+r.itemWidth,r.viewCount=Math.ceil(r.listWidth/r.mainWidthPx),o.css({width:r.listWidth}),o.find("li").css({width:r.itemWidth}),d(o,!1),p(o)),o.find("li").off("mouseup touchend"),o.find("li").on("mouseup touchend",function(t){t.preventDefault(),a||e(this).trigger("mySlider_click_event")}),setTimeout(function(){h()},r.autoUpdateInterval)},p=function(e){var t=[];for(var n=0;n<r.viewCount;n++)t.push("<li/>");i.find(".mySlider_navbar ul").empty().append(t.join("")),u=i.find(".mySlider_navbar ul li"),u.removeClass("active"),u.eq(r.viewIdx).addClass("active"),u.off("mouseup touchend"),u.on("mouseup touchend",function(t){t.preventDefault(),r.viewIdx=u.index(this),u.removeClass("active"),u.eq(r.viewIdx).addClass("active"),r.viewIdx==r.viewCount-1&&r.viewIdx>0?endLeft=r.mainWidthPx-r.listWidth:endLeft=-r.viewIdx*r.mainWidthPx,e.animate({left:endLeft+"px"},200,function(){d(e,!1)})})},d=function(e,t){var i,s;r.currentLeft=parseFloat(e.css("left")),r.currentLeft>=0?(t?e.css("left",0):e.animate({left:0},100),r.viewIdx=0):r.currentLeft<=r.mainWidthPx-r.listWidth?r.mainWidthPx<r.listWidth?(t?e.css("left",r.mainWidthPx-r.listWidth+"px"):e.animate({left:r.mainWidthPx-r.listWidth+"px"},100),r.viewIdx=r.viewCount-1):(t?e.css("left",0):e.animate({left:0},100),r.viewIdx=0):(i=r.margin-r.currentLeft,s=i/(r.itemWidth+r.margin),s-Math.floor(s)<.5?s=Math.floor(s):s=Math.floor(s)+1,i=s*(r.itemWidth+r.margin),t?e.css("left",-i+"px"):e.animate({left:-i+"px"},100),i/=r.mainWidthPx,i-Math.floor(i)<.5?i=Math.floor(i):i=Math.floor(i)+1,r.viewIdx=i),n.navbar&&(u.removeClass("active"),u.eq(r.viewIdx).addClass("active"))},v=function(e){r.mainWidthPx=parseFloat(e.parent().css("width")),n.itemWidth.indexOf("px")==-1&&(r.itemWidth=parseFloat(n.itemWidth)*r.mainWidthPx/100,r.listWidth=(r.itemWidth+r.margin)*(e.find("li").length-1)+r.itemWidth,e.css({width:r.listWidth}),e.find("li").css({width:r.itemWidth})),r.viewCount=Math.ceil(r.listWidth/r.mainWidthPx),d(e,!0),p(e)},m=function(t){var o=document.getElementById(s),f,l,c,h=!1;if(!o.addEventListener){var p=t.parent();p.on("mousedown",function(e){e.preventDefault(),h=!0,a=!1,l=e.screenX,r.currentLeft=parseFloat(t.css("left"))}),p.on("mousemove",function(e){e.preventDefault(),h&&(a=!0,c=r.currentLeft+e.screenX-l,t.css("left",c+"px"))}),p.on("mouseup",function(e){e.preventDefault(),a&&t.animate({left:"+="+(c-r.currentLeft)/5+"px"},400,function(){d(t,!1)}),h=!1})}else o.addEventListener("touchstart",function(e){e.preventDefault(),h=!0,a=!1,r.currentLeft=parseFloat(t.css("left"))}),o.addEventListener("touchmove",function(e){e.preventDefault(),f=e.touches[0],h&&(a=!0,l=f.pageX,h=!1),c=r.currentLeft+f.pageX-l,t.css("left",c+"px")}),o.addEventListener("touchend",function(e){e.preventDefault(),a&&t.animate({left:"+="+(c-r.currentLeft)/5+"px"},400,function(){d(t,!1)})}),o.addEventListener("mousedown",function(e){e.preventDefault(),h=!0,a=!1,l=e.pageX,r.currentLeft=parseFloat(t.css("left"))}),o.addEventListener("mousemove",function(e){e.preventDefault(),h&&(a=!0,c=r.currentLeft+e.pageX-l,t.css("left",c+"px"))}),o.addEventListener("mouseup",function(e){e.preventDefault(),a&&t.animate({left:"+="+(e.pageX-l)/5+"px"},400,function(){d(t,!1)}),h=!1});var m=!1;i.find(".mySlider_arrow").eq(0).on("mousedown touchstart",function(e){e.preventDefault(),r.viewIdx>0&&(r.viewIdx-=1),c=-r.viewIdx*r.mainWidthPx,t.animate({left:c+"px"},200,function(){m&&d(t,!1)}),n.navbar&&(u.removeClass("active"),u.eq(r.viewIdx).addClass("active"))}),i.find(".mySlider_arrow").eq(1).on("mousedown touchstart",function(e){e.preventDefault(),r.viewIdx<r.viewCount-1&&(r.viewIdx+=1),r.viewIdx==r.viewCount-1&&r.viewIdx>0?c=r.mainWidthPx-r.listWidth:c=-r.viewIdx*r.mainWidthPx,t.animate({left:c+"px"},200,function(){m&&d(t,!1)}),n.navbar&&(u.removeClass("active"),u.eq(r.viewIdx).addClass("active"))}),e(window).on("resize",function(){v(t)}),t.find("li").on("mouseup touchend",function(t){t.preventDefault(),a||e(this).trigger("mySlider_click_event")})};f(),l(),c(),setTimeout(function(){m(o),n.autoUpdate&&h()},100)}})(jQuery)